sudo: false
language: go
# TODO Update after https://github.com/travis-ci/gimme/issues/93 is resolved.
go: 1.8.3

branches:
  only:
  - authoring

addons:
  apt:
    packages:
     - python-pip

install:
 - pip install pygments==2.1.3
 - git clone https://github.com/oftlisp/oftlisp-lexer-pygments.git /tmp/lexer
 - cd /tmp/lexer && python setup.py install --user
 - go get -u -v github.com/gohugoio/hugo
script:
 - hugo -v

deploy:
  fqdn: remexre.xyz
  github_token: $GITHUB_TOKEN
  local_dir: public
  on:
    branch: authoring
  provider: pages
  skip_cleanup: true
  target_branch: master
