<!doctype html>
<html lang="en">
  <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Notebook: Vulkan</title><link rel="stylesheet" type="text/css"
       href="https://remexre.xyz/css/main.css"><link rel="stylesheet" type="text/css"
       href="https://remexre.xyz/css/monokai-sublime.min.css"><style>article { width: calc(100% - 1.0rem); }</style></head>
  <body>
    <header>
      <a class="subtle" href="https://remexre.xyz/">Home</a>
      <a class="subtle" href="https://remexre.xyz/contact">Contact</a>
      <a class="subtle" href="https://remexre.xyz/projects">Projects</a>
    </header>
    <div class="spacer"></div>
    <article><h1 class="title"><a class="subtle" href="https://remexre.xyz/notebooks/vulkan">Notebook: Vulkan</a><span class="spacer"></span><span class="meta">Draft</span></h1><h1>nova</h1>
<p>goal:</p>
<ul>
<li>type-safe</li>
<li>sync-safe</li>
<li>raii</li>
</ul>
<h2>Example</h2>
<pre><code class="language-dot"><p class="graphviz"><!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="639pt" height="152pt"
 viewBox="0.00 0.00 638.58 152.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 148)">
<title>%3</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-148 634.58,-148 634.58,4 -4,4"/>
<!-- updateParticleWorldPosns -->
<g id="node1" class="node">
<title>updateParticleWorldPosns</title>
<ellipse fill="none" stroke="black" cx="127.39" cy="-126" rx="127.28" ry="18"/>
<text text-anchor="middle" x="127.39" y="-122.3" font-family="Times-Roman" font-size="14.00">updateParticleWorldPosns</text>
</g>
<!-- updateParticles -->
<g id="node4" class="node">
<title>updateParticles</title>
<ellipse fill="none" stroke="black" cx="370.72" cy="-70" rx="79.89" ry="18"/>
<text text-anchor="middle" x="370.72" y="-66.3" font-family="Times-Roman" font-size="14.00">updateParticles</text>
</g>
<!-- updateParticleWorldPosns&#45;&gt;updateParticles -->
<g id="edge2" class="edge">
<title>updateParticleWorldPosns&#45;&gt;updateParticles</title>
<path fill="none" stroke="black" d="M200.01,-111.18C217.92,-107.34 237.08,-103.12 254.78,-99 272.04,-94.98 290.69,-90.38 307.84,-86.05"/>
<polygon fill="black" stroke="black" points="308.92,-89.39 317.75,-83.54 307.2,-82.61 308.92,-89.39"/>
<text text-anchor="middle" x="385.25" y="-87.34" font-family="Times-Roman" font-size="14.00">COMPUTE_SHADER</text>
<text text-anchor="middle" x="237.01" y="-99.98" font-family="Times-Roman" font-size="14.00">TRANSFER</text>
</g>
<!-- clearParticleScreenPosns -->
<g id="node2" class="node">
<title>clearParticleScreenPosns</title>
<ellipse fill="none" stroke="black" cx="127.39" cy="-72" rx="122.38" ry="18"/>
<text text-anchor="middle" x="127.39" y="-68.3" font-family="Times-Roman" font-size="14.00">clearParticleScreenPosns</text>
</g>
<!-- clearParticleScreenPosns&#45;&gt;updateParticles -->
<g id="edge3" class="edge">
<title>clearParticleScreenPosns&#45;&gt;updateParticles</title>
<path fill="none" stroke="black" d="M249.41,-71C259.9,-70.91 270.4,-70.82 280.57,-70.74"/>
<polygon fill="black" stroke="black" points="280.65,-74.24 290.62,-70.66 280.59,-67.24 280.65,-74.24"/>
<text text-anchor="middle" x="223.12" y="-74.46" font-family="Times-Roman" font-size="14.00">COMPUTE_SHADER</text>
<text text-anchor="middle" x="286.41" y="-59.8" font-family="Times-Roman" font-size="14.00">TRANSFER</text>
</g>
<!-- drawGeometry -->
<g id="node3" class="node">
<title>drawGeometry</title>
<ellipse fill="none" stroke="black" cx="127.39" cy="-18" rx="77.19" ry="18"/>
<text text-anchor="middle" x="127.39" y="-14.3" font-family="Times-Roman" font-size="14.00">drawGeometry</text>
</g>
<!-- drawGeometry&#45;&gt;updateParticles -->
<g id="edge1" class="edge">
<title>drawGeometry&#45;&gt;updateParticles</title>
<path fill="none" stroke="black" d="M185.02,-30.05C206.83,-34.7 231.97,-40.08 254.78,-45 270.25,-48.34 286.9,-51.94 302.58,-55.35"/>
<polygon fill="black" stroke="black" points="302.21,-58.85 312.73,-57.56 303.7,-52.01 302.21,-58.85"/>
<text text-anchor="middle" x="380.23" y="-46.36" font-family="Times-Roman" font-size="14.00">COMPUTE_SHADER</text>
<text text-anchor="middle" x="269.02" y="-33.85" font-family="Times-Roman" font-size="14.00">LATE_FRAGMENT_TESTS</text>
</g>
<!-- shade -->
<g id="node5" class="node">
<title>shade</title>
<ellipse fill="none" stroke="black" cx="525.01" cy="-45" rx="38.19" ry="18"/>
<text text-anchor="middle" x="525.01" y="-41.3" font-family="Times-Roman" font-size="14.00">shade</text>
</g>
<!-- drawGeometry&#45;&gt;shade -->
<g id="edge4" class="edge">
<title>drawGeometry&#45;&gt;shade</title>
<path fill="none" stroke="black" d="M201.87,-23.02C282.32,-28.51 408.91,-37.14 476.97,-41.79"/>
<polygon fill="black" stroke="black" points="476.76,-45.28 486.98,-42.47 477.24,-38.3 476.76,-45.28"/>
<text text-anchor="middle" x="415.98" y="-31.27" font-family="Times-Roman" font-size="14.00">FRAGMENT_SHADER</text>
<text text-anchor="middle" x="308.87" y="-19.32" font-family="Times-Roman" font-size="14.00">COLOR_ATTACHMENT_OUTPUT</text>
</g>
<!-- updateParticles&#45;&gt;shade -->
<g id="edge5" class="edge">
<title>updateParticles&#45;&gt;shade</title>
<path fill="none" stroke="black" d="M435.86,-59.47C450.24,-57.11 465.21,-54.65 478.64,-52.45"/>
<polygon fill="black" stroke="black" points="479.28,-55.89 488.58,-50.82 478.14,-48.98 479.28,-55.89"/>
<text text-anchor="middle" x="559.58" y="-39.62" font-family="Times-Roman" font-size="14.00">FRAGMENT_SHADER</text>
<text text-anchor="middle" x="503.36" y="-63.27" font-family="Times-Roman" font-size="14.00">COMPUTE_SHADER</text>
</g>
</g>
</svg>
</p>
</code></pre>
<h2>API</h2>
<p><code>Device : *</code></p>
<ul>
<li><code>new_device : Target t =&gt; t -o Device</code></li>
</ul>
<p><code>Cmd : * -&gt; *</code></p>
<ul>
<li><code>run : Device -&gt; Cmd a -o a</code></li>
</ul>
<p><code>CmdBufUsage : *</code></p>
<ul>
<li><code>OneTimeSubmit : CmdBufUsage</code></li>
<li><code>Reusable : CmdBufUsage</code></li>
</ul>
<p><code>CmdBuf : CmdBufTypeState -&gt; *</code></p>
<ul>
<li><code>submit : CmdBuf (Executable t) -o CmdBuf (Pending t)</code></li>
<li><code>waitComplete : CmdBuf (Pending Reusable) -o CmdBuf (Executable Reusable)</code></li>
<li><code>waitCompleteOne : CmdBuf (Pending OneTimeSubmit) -o CmdBuf Invalid</code></li>
</ul>
<p><code>Image : *</code></p>
<ul>
<li><code>create : Device -&gt; Image</code></li>
<li><code>destroy : Image -o ()</code></li>
</ul>
</article><div class="comments">Comments are not enabled on this post.</div>
    <div class="spacer"></div>
    <script src="https://remexre.xyz/ext/anchor.min.js"></script><script>const anchors = new AnchorJS();anchors.options.class = "icon subtle";anchors.options.placement = "left";anchors.add("article h1:not(.title), article h2");</script>
  </body>
</html>
