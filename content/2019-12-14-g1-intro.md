+++
title = "G1: A simple graph store, written in Rust"
draft = true

[taxonomies]
tags = ["g1", "rust"]
+++

Intro
=====

Over the next few weeks/months, I'm implementing a graph store in Rust, [G1](https://github.com/remexre/g1).

-	SQLite good b/c ez to configure
-	Wanted a graph db for a project, with Datalog for querying
-	Making simple graph database seems like a good project to blog abt, to incentivize myself to learn abt how to do this well

Model
=====

**Atom**: Atoms are the nodes of the graph. Each is represented as a UUID.

**Name**: Names uniquely identify an Atom. They have a namespace and a title, both of which are Strings.

**Edge**: Edges are directed, with an Atom at both endpoints. Edges have a String label associated with them. At most one edge between two Atoms with a given label may exist.

**Attribute**: Attributes are attached to Atoms. They have a key and a value, both of which are Strings.

**Blob**: Blobs are attached to Atoms. They have a kind, which is a String; a type, which is a MIME type; and contents, which are an arbitrarily large binary String. Blobs are referred to by a SHA256 hash.

Strings are UTF-8 Strings, which should be no longer than 256 bytes.

Query Language
==============

[Datalog](https://en.wikipedia.org/wiki/Datalog) variant

Builtin predicates for reading data in the database:

-	`name(Atom, Namespace, Title)`
-	`edge(From, To, Label)`
-	`attr(Atom, Key, Value)`
-	`blob(Atom, Kind, Mime, Hash)`

Other builtins:

-	`'='(A, B)` (usually written `A = B`\)

```pro
friend(Me, You) :-
	edge(Me, You, "friend").

friendOfFriend(Me, You) :-
	friend(Me, Other),
	friend(Other, You).

frenemyName(Me, YourName) :-
	friendOfFriend(Me, You),
	! friend(Me, You),
	! Me = You,
	attr(You, "name", YourName).

?- frenemy("59760f34-eee0-44e2-9358-f48d46c686ee", YourName).
```
