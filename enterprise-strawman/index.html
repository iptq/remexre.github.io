<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title>enterprise: Strawman Proposal &mdash; remexre.xyz</title>
		<link rel="stylesheet" type="text/css" href="https:&#x2F;&#x2F;remexre.xyz&#x2F;css/main.css">
		<style>article { width: calc(100% - 1.0rem); }</style>
	</head>
	<body>
		<header>
			<a class="subtle" href="https:&#x2F;&#x2F;remexre.xyz&#x2F;">Home</a>
			<a class="subtle" href="https:&#x2F;&#x2F;remexre.xyz&#x2F;tags">Tags</a>
			<a class="subtle" href="https:&#x2F;&#x2F;remexre.xyz&#x2F;contact">Contact</a>
			<a class="subtle" href="https:&#x2F;&#x2F;remexre.xyz&#x2F;projects">Projects</a>
		</header>
		<div class="spacer"></div>
		
<article>
	<h1 class="title">
		<a class="subtle" href="https:&#x2F;&#x2F;remexre.xyz&#x2F;enterprise-strawman&#x2F;">enterprise: Strawman Proposal</a>
		<span class="spacer"></span>
		<span class="meta">
			Draft</span>
	</h1>
	<p>A friend (<a href="https://iptq.io/">Michael Zhang</a>) and I may be working on a web framework for Rust, <a href="https://crates.io/crates/enterprise"><code>enterprise</code></a>. This post serves as a strawman proposal for this framework, and as documentation for what the framework may eventually be.</p>
<p>Also note that despite the authorial &quot;we,&quot; this is almost entirely my vision (hence the S-expressions, use of Prolog, etc.), so expect this to be a strawman that's lit aflame rather than fortified.</p>
<h1 id="introduction">Introduction</h1>
<p>The model we use for webapps is described by a dependency diagram:</p>
<p class="graphviz"><!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: dependency graph Pages: 1 -->
<svg width="547pt" height="223pt"
 viewBox="0.00 0.00 546.72 223.48" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 219.48)">
<title>dependency graph</title>
<polygon fill="#1e1f29" stroke="transparent" points="-4,4 -4,-219.48 542.72,-219.48 542.72,4 -4,4"/>
<!-- BLogic -->
<g id="node1" class="node">
<title>BLogic</title>
<g id="a_node1"><a xlink:href="#business-logic" xlink:title="Business\nLogic">
<ellipse fill="none" stroke="#8be9fe" cx="221.44" cy="-188.61" rx="56.64" ry="26.74"/>
<text text-anchor="middle" x="221.44" y="-192.41" font-family="Times,serif" font-size="14.00" fill="#8be9fe">Business</text>
<text text-anchor="middle" x="221.44" y="-177.41" font-family="Times,serif" font-size="14.00" fill="#8be9fe">Logic</text>
</a>
</g>
</g>
<!-- Actions -->
<g id="node2" class="node">
<title>Actions</title>
<g id="a_node2"><a xlink:href="#actions" xlink:title="Actions">
<ellipse fill="none" stroke="#8be9fe" cx="109.44" cy="-98.87" rx="44.69" ry="18"/>
<text text-anchor="middle" x="109.44" y="-95.17" font-family="Times,serif" font-size="14.00" fill="#8be9fe">Actions</text>
</a>
</g>
</g>
<!-- BLogic&#45;&gt;Actions -->
<g id="edge5" class="edge">
<title>BLogic&#45;&gt;Actions</title>
<path fill="none" stroke="#fc4346" d="M192.89,-165.24C175.74,-151.8 154.02,-134.79 137.04,-121.49"/>
<polygon fill="#fc4346" stroke="#fc4346" points="139.15,-118.7 129.12,-115.29 134.84,-124.21 139.15,-118.7"/>
</g>
<!-- Schema -->
<g id="node3" class="node">
<title>Schema</title>
<g id="a_node3"><a xlink:href="#schema" xlink:title="Schema">
<ellipse fill="none" stroke="#8be9fe" cx="145.44" cy="-18" rx="47.39" ry="18"/>
<text text-anchor="middle" x="145.44" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#8be9fe">Schema</text>
</a>
</g>
</g>
<!-- BLogic&#45;&gt;Schema -->
<g id="edge7" class="edge">
<title>BLogic&#45;&gt;Schema</title>
<path fill="none" stroke="#fc4346" d="M209.9,-162C195.68,-130.44 171.63,-77.1 157.28,-45.25"/>
<polygon fill="#fc4346" stroke="#fc4346" points="160.45,-43.78 153.15,-36.1 154.07,-46.66 160.45,-43.78"/>
</g>
<!-- Authentication -->
<g id="node6" class="node">
<title>Authentication</title>
<g id="a_node6"><a xlink:href="#authentication" xlink:title="Authentication">
<ellipse fill="none" stroke="#f0fb8c" cx="289.44" cy="-98.87" rx="79.09" ry="18"/>
<text text-anchor="middle" x="289.44" y="-95.17" font-family="Times,serif" font-size="14.00" fill="#f0fb8c">Authentication</text>
</a>
</g>
</g>
<!-- BLogic&#45;&gt;Authentication -->
<g id="edge6" class="edge">
<title>BLogic&#45;&gt;Authentication</title>
<path fill="none" stroke="#fc4346" d="M240.39,-163.17C249.71,-151.14 260.93,-136.67 270.28,-124.6"/>
<polygon fill="#fc4346" stroke="#fc4346" points="273.05,-126.73 276.41,-116.69 267.52,-122.45 273.05,-126.73"/>
</g>
<!-- Actions&#45;&gt;Schema -->
<g id="edge1" class="edge">
<title>Actions&#45;&gt;Schema</title>
<path fill="none" stroke="#fc4346" d="M117.25,-80.76C122,-70.35 128.17,-56.85 133.52,-45.13"/>
<polygon fill="#fc4346" stroke="#fc4346" points="136.8,-46.36 137.77,-35.81 130.43,-43.45 136.8,-46.36"/>
</g>
<!-- Views -->
<g id="node4" class="node">
<title>Views</title>
<g id="a_node4"><a xlink:href="#views" xlink:title="Views">
<ellipse fill="none" stroke="#fc4cb4" cx="396.44" cy="-188.61" rx="38.19" ry="18"/>
<text text-anchor="middle" x="396.44" y="-184.91" font-family="Times,serif" font-size="14.00" fill="#fc4cb4">Views</text>
</a>
</g>
</g>
<!-- Views&#45;&gt;Schema -->
<g id="edge9" class="edge">
<title>Views&#45;&gt;Schema</title>
<path fill="none" stroke="#fc4346" d="M399,-170.56C401.72,-145.51 402.66,-98.82 377.44,-72 353.77,-46.82 261.93,-31.91 201.15,-24.61"/>
<polygon fill="#fc4346" stroke="#fc4346" points="201.27,-21.1 190.93,-23.42 200.46,-28.05 201.27,-21.1"/>
</g>
<!-- ViewAdapters -->
<g id="node5" class="node">
<title>ViewAdapters</title>
<g id="a_node5"><a xlink:href="#view-adapters" xlink:title="View\nAdapters">
<ellipse fill="none" stroke="#f0fb8c" cx="481.44" cy="-98.87" rx="57.05" ry="26.74"/>
<text text-anchor="middle" x="481.44" y="-102.67" font-family="Times,serif" font-size="14.00" fill="#f0fb8c">View</text>
<text text-anchor="middle" x="481.44" y="-87.67" font-family="Times,serif" font-size="14.00" fill="#f0fb8c">Adapters</text>
</a>
</g>
</g>
<!-- Views&#45;&gt;ViewAdapters -->
<g id="edge10" class="edge">
<title>Views&#45;&gt;ViewAdapters</title>
<path fill="none" stroke="#fc4346" d="M411.64,-171.92C422.6,-160.61 437.76,-144.96 451.15,-131.14"/>
<polygon fill="#fc4346" stroke="#fc4346" points="453.93,-133.3 458.37,-123.69 448.9,-128.43 453.93,-133.3"/>
</g>
<!-- Views&#45;&gt;Authentication -->
<g id="edge8" class="edge">
<title>Views&#45;&gt;Authentication</title>
<path fill="none" stroke="#fc4346" d="M378.29,-172.73C361.6,-159.04 336.59,-138.53 317.36,-122.76"/>
<polygon fill="#fc4346" stroke="#fc4346" points="319.46,-119.96 309.51,-116.32 315.02,-125.37 319.46,-119.96"/>
</g>
<!-- Authorization -->
<g id="node7" class="node">
<title>Authorization</title>
<g id="a_node7"><a xlink:href="#authorization" xlink:title="Authorization">
<ellipse fill="none" stroke="#fc4cb4" cx="73.44" cy="-188.61" rx="73.39" ry="18"/>
<text text-anchor="middle" x="73.44" y="-184.91" font-family="Times,serif" font-size="14.00" fill="#fc4cb4">Authorization</text>
</a>
</g>
</g>
<!-- Authorization&#45;&gt;Actions -->
<g id="edge2" class="edge">
<title>Authorization&#45;&gt;Actions</title>
<path fill="none" stroke="#fc4346" d="M80.56,-170.28C85.72,-157.7 92.79,-140.46 98.65,-126.18"/>
<polygon fill="#fc4346" stroke="#fc4346" points="101.91,-127.45 102.47,-116.87 95.43,-124.79 101.91,-127.45"/>
</g>
<!-- Authorization&#45;&gt;Schema -->
<g id="edge4" class="edge">
<title>Authorization&#45;&gt;Schema</title>
<path fill="none" stroke="#fc4346" d="M64.45,-170.69C53.21,-147.02 37.5,-103.39 55.44,-72 65.31,-54.73 83.25,-42.53 100.53,-34.23"/>
<polygon fill="#fc4346" stroke="#fc4346" points="102.29,-37.27 110,-30.01 99.44,-30.88 102.29,-37.27"/>
</g>
<!-- Authorization&#45;&gt;Authentication -->
<g id="edge3" class="edge">
<title>Authorization&#45;&gt;Authentication</title>
<path fill="none" stroke="#fc4346" d="M109.6,-172.92C146.21,-158.05 202.99,-134.99 242.93,-118.76"/>
<polygon fill="#fc4346" stroke="#fc4346" points="244.5,-121.9 252.45,-114.9 241.87,-115.42 244.5,-121.9"/>
</g>
</g>
</svg>
</p>
<p>As well as a dataflow diagram for server-side rendering:</p>
<p class="graphviz"><!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: dataflow graph Pages: 1 -->
<svg width="380pt" height="513pt"
 viewBox="0.00 0.00 379.72 513.48" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 509.48)">
<title>dataflow graph</title>
<polygon fill="#1e1f29" stroke="transparent" points="-4,4 -4,-509.48 375.72,-509.48 375.72,4 -4,4"/>
<!-- HTTP -->
<g id="node1" class="node">
<title>HTTP</title>
<text text-anchor="middle" x="222.44" y="-483.78" font-family="Times,serif" font-size="14.00" fill="#cfcfcf">HTTP</text>
</g>
<!-- Router -->
<g id="node7" class="node">
<title>Router</title>
<g id="a_node7"><a xlink:href="#router" xlink:title="Router">
<ellipse fill="none" stroke="#f0fb8c" cx="222.44" cy="-415.48" rx="42.49" ry="18"/>
<text text-anchor="middle" x="222.44" y="-411.78" font-family="Times,serif" font-size="14.00" fill="#f0fb8c">Router</text>
</a>
</g>
</g>
<!-- HTTP&#45;&gt;Router -->
<g id="edge1" class="edge">
<title>HTTP&#45;&gt;Router</title>
<path fill="none" stroke="#cfcfcf" d="M216.53,-469.18C215.73,-461.46 215.51,-452.19 215.85,-443.59"/>
<polygon fill="#cfcfcf" stroke="#cfcfcf" points="219.34,-443.8 216.55,-433.58 212.36,-443.32 219.34,-443.8"/>
</g>
<!-- Databases -->
<g id="node2" class="node">
<title>Databases</title>
<text text-anchor="middle" x="209.44" y="-22.8" font-family="Times,serif" font-size="14.00" fill="#cfcfcf">Databases and</text>
<text text-anchor="middle" x="209.44" y="-7.8" font-family="Times,serif" font-size="14.00" fill="#cfcfcf">External Services</text>
</g>
<!-- DAL -->
<g id="node6" class="node">
<title>DAL</title>
<g id="a_node6"><a xlink:href="#data-access-layer" xlink:title="DAL">
<ellipse fill="none" stroke="#f0fb8c" cx="209.44" cy="-92" rx="30.59" ry="18"/>
<text text-anchor="middle" x="209.44" y="-88.3" font-family="Times,serif" font-size="14.00" fill="#f0fb8c">DAL</text>
</a>
</g>
</g>
<!-- Databases&#45;&gt;DAL -->
<g id="edge3" class="edge">
<title>Databases&#45;&gt;DAL</title>
<path fill="none" stroke="#cfcfcf" d="M215.42,-38.2C216.19,-46.08 216.38,-55.47 216.01,-64.12"/>
<polygon fill="#cfcfcf" stroke="#cfcfcf" points="212.52,-63.95 215.28,-74.17 219.5,-64.45 212.52,-63.95"/>
</g>
<!-- Authorization -->
<g id="node3" class="node">
<title>Authorization</title>
<g id="a_node3"><a xlink:href="#authorization" xlink:title="Authorization">
<ellipse fill="none" stroke="#fc4cb4" cx="73.44" cy="-164" rx="73.39" ry="18"/>
<text text-anchor="middle" x="73.44" y="-160.3" font-family="Times,serif" font-size="14.00" fill="#fc4cb4">Authorization</text>
</a>
</g>
</g>
<!-- Actions -->
<g id="node4" class="node">
<title>Actions</title>
<g id="a_node4"><a xlink:href="#actions" xlink:title="Actions">
<ellipse fill="none" stroke="#8be9fe" cx="209.44" cy="-164" rx="44.69" ry="18"/>
<text text-anchor="middle" x="209.44" y="-160.3" font-family="Times,serif" font-size="14.00" fill="#8be9fe">Actions</text>
</a>
</g>
</g>
<!-- Authorization&#45;&gt;Actions -->
<g id="edge11" class="edge">
<title>Authorization&#45;&gt;Actions</title>
<path fill="none" stroke="#50fb7c" d="M147.02,-164C149.49,-164 151.96,-164 154.43,-164"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="154.58,-167.5 164.58,-164 154.58,-160.5 154.58,-167.5"/>
</g>
<!-- BLogic -->
<g id="node5" class="node">
<title>BLogic</title>
<g id="a_node5"><a xlink:href="#business-logic" xlink:title="Business\nLogic">
<ellipse fill="none" stroke="#8be9fe" cx="209.44" cy="-244.87" rx="56.64" ry="26.74"/>
<text text-anchor="middle" x="209.44" y="-248.67" font-family="Times,serif" font-size="14.00" fill="#8be9fe">Business</text>
<text text-anchor="middle" x="209.44" y="-233.67" font-family="Times,serif" font-size="14.00" fill="#8be9fe">Logic</text>
</a>
</g>
</g>
<!-- Actions&#45;&gt;BLogic -->
<g id="edge9" class="edge">
<title>Actions&#45;&gt;BLogic</title>
<path fill="none" stroke="#50fb7c" d="M215.1,-181.93C215.94,-189.58 216.29,-198.91 216.17,-208"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="212.67,-207.93 215.82,-218.05 219.67,-208.17 212.67,-207.93"/>
</g>
<!-- Actions&#45;&gt;DAL -->
<g id="edge13" class="edge">
<title>Actions&#45;&gt;DAL</title>
<path fill="none" stroke="#50fb7c" d="M203.57,-146.05C202.73,-138.23 202.5,-128.75 202.85,-119.98"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="206.36,-120.01 203.58,-109.79 199.38,-119.51 206.36,-120.01"/>
</g>
<!-- BLogic&#45;&gt;Actions -->
<g id="edge8" class="edge">
<title>BLogic&#45;&gt;Actions</title>
<path fill="none" stroke="#50fb7c" d="M203.06,-218.05C202.59,-209.71 202.57,-200.44 203,-192.02"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="206.5,-192.17 203.78,-181.93 199.52,-191.63 206.5,-192.17"/>
</g>
<!-- Views -->
<g id="node9" class="node">
<title>Views</title>
<g id="a_node9"><a xlink:href="#views" xlink:title="Views">
<ellipse fill="none" stroke="#fc4cb4" cx="322.44" cy="-244.87" rx="38.19" ry="18"/>
<text text-anchor="middle" x="322.44" y="-241.17" font-family="Times,serif" font-size="14.00" fill="#fc4cb4">Views</text>
</a>
</g>
</g>
<!-- BLogic&#45;&gt;Views -->
<g id="edge15" class="edge">
<title>BLogic&#45;&gt;Views</title>
<path fill="none" stroke="#50fb7c" d="M266.38,-244.87C268.85,-244.87 271.31,-244.87 273.78,-244.87"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="273.9,-248.37 283.9,-244.87 273.9,-241.37 273.9,-248.37"/>
</g>
<!-- DAL&#45;&gt;Databases -->
<g id="edge4" class="edge">
<title>DAL&#45;&gt;Databases</title>
<path fill="none" stroke="#cfcfcf" d="M203.6,-74.17C202.78,-66.48 202.51,-57.14 202.81,-48.41"/>
<polygon fill="#cfcfcf" stroke="#cfcfcf" points="206.32,-48.4 203.46,-38.2 199.34,-47.96 206.32,-48.4"/>
</g>
<!-- DAL&#45;&gt;Authorization -->
<g id="edge12" class="edge">
<title>DAL&#45;&gt;Authorization</title>
<path fill="none" stroke="#50fb7c" d="M186.95,-104.58C166.76,-114.97 136.67,-130.46 112.55,-142.87"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="110.92,-139.78 103.63,-147.46 114.12,-146 110.92,-139.78"/>
</g>
<!-- DAL&#45;&gt;Actions -->
<g id="edge14" class="edge">
<title>DAL&#45;&gt;Actions</title>
<path fill="none" stroke="#50fb7c" d="M215.31,-109.79C216.14,-117.59 216.39,-127.07 216.04,-135.85"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="212.53,-135.83 215.32,-146.05 219.52,-136.33 212.53,-135.83"/>
</g>
<!-- Router&#45;&gt;HTTP -->
<g id="edge2" class="edge">
<title>Router&#45;&gt;HTTP</title>
<path fill="none" stroke="#cfcfcf" d="M228.34,-433.58C229.14,-441.27 229.38,-450.53 229.05,-459.15"/>
<polygon fill="#cfcfcf" stroke="#cfcfcf" points="225.55,-458.96 228.36,-469.18 232.54,-459.44 225.55,-458.96"/>
</g>
<!-- Router&#45;&gt;BLogic -->
<g id="edge5" class="edge">
<title>Router&#45;&gt;BLogic</title>
<path fill="none" stroke="#50fb7c" d="M221.13,-397.39C219.05,-370.41 214.96,-317.38 212.21,-281.78"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="215.7,-281.49 211.44,-271.78 208.72,-282.02 215.7,-281.49"/>
</g>
<!-- Authentication -->
<g id="node10" class="node">
<title>Authentication</title>
<g id="a_node10"><a xlink:href="#authentication" xlink:title="Authentication">
<ellipse fill="none" stroke="#f0fb8c" cx="115.44" cy="-334.61" rx="79.09" ry="18"/>
<text text-anchor="middle" x="115.44" y="-330.91" font-family="Times,serif" font-size="14.00" fill="#f0fb8c">Authentication</text>
</a>
</g>
</g>
<!-- Router&#45;&gt;Authentication -->
<g id="edge6" class="edge">
<title>Router&#45;&gt;Authentication</title>
<path fill="none" stroke="#50fb7c" d="M202.32,-399.65C186.5,-387.99 164.21,-371.55 146.16,-358.25"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="147.82,-355.13 137.7,-352.01 143.67,-360.76 147.82,-355.13"/>
</g>
<!-- ViewAdapters -->
<g id="node8" class="node">
<title>ViewAdapters</title>
<g id="a_node8"><a xlink:href="#view-adapters" xlink:title="View\nAdapters">
<ellipse fill="none" stroke="#f0fb8c" cx="314.44" cy="-334.61" rx="57.05" ry="26.74"/>
<text text-anchor="middle" x="314.44" y="-338.41" font-family="Times,serif" font-size="14.00" fill="#f0fb8c">View</text>
<text text-anchor="middle" x="314.44" y="-323.41" font-family="Times,serif" font-size="14.00" fill="#f0fb8c">Adapters</text>
</a>
</g>
</g>
<!-- ViewAdapters&#45;&gt;Router -->
<g id="edge17" class="edge">
<title>ViewAdapters&#45;&gt;Router</title>
<path fill="none" stroke="#50fb7c" d="M287.59,-358.63C275.2,-369.26 260.55,-381.81 248.29,-392.33"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="245.93,-389.73 240.62,-398.9 250.49,-395.05 245.93,-389.73"/>
</g>
<!-- Views&#45;&gt;ViewAdapters -->
<g id="edge16" class="edge">
<title>Views&#45;&gt;ViewAdapters</title>
<path fill="none" stroke="#50fb7c" d="M320.89,-262.95C319.99,-272.8 318.82,-285.57 317.73,-297.54"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="314.22,-297.48 316.8,-307.76 321.19,-298.12 314.22,-297.48"/>
</g>
<!-- Authentication&#45;&gt;Authorization -->
<g id="edge10" class="edge">
<title>Authentication&#45;&gt;Authorization</title>
<path fill="none" stroke="#50fb7c" d="M111.19,-316.52C103.89,-287.23 88.95,-227.23 80.21,-192.16"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="83.53,-191 77.71,-182.14 76.73,-192.69 83.53,-191"/>
</g>
<!-- Authentication&#45;&gt;BLogic -->
<g id="edge7" class="edge">
<title>Authentication&#45;&gt;BLogic</title>
<path fill="none" stroke="#50fb7c" d="M133.57,-316.69C145.92,-305.16 162.63,-289.57 177.22,-275.95"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="179.7,-278.42 184.62,-269.04 174.92,-273.3 179.7,-278.42"/>
</g>
</g>
</svg>
</p>
<p>In the above diagrams, <span style="color: #f0fb8c">yellow</span> components are provided by <code>enterprise</code>, <span style="color: #8be9fe">blue</span> components are written by the application author in Rust, and <span style="color: #fc4cb4">pink</span> components are written by the application author in a DSL.</p>
<p>The Schema and DAL components are taken from <a href="https://www.tedinski.com/2018/09/11/stateless-mvc.html">Ted Kaminski's &quot;Stateless MVC,&quot;</a> which describes them in detail.</p>
<h1 id="schema">Schema</h1>
<p>The Schema component contains type declarations for each of the &quot;domain objects.&quot; If a type ends up being sent over the network, it should probably be declared here. <a href="https://iptq.io/magic-forms-with-proc-macros/">Derive macros</a> are provided to allow the Router to validate these values.</p>
<p>The only exports of the Schema should be types -- if you find yourself exporting functions, they probably belong in the business logic.</p>
<h1 id="actions">Actions</h1>
<p>Actions are the atomic primitive functions that are used to define the business logic. Macros are available to define CRUD actions for types in the Schema (relative to some data store supported by the DAL).</p>
<h1 id="business-logic">Business Logic</h1>
<p>The Business Logic module transforms requests into data that can be handled directly by a View.</p>
<h1 id="views">Views</h1>
<p>Views are written in a React-like DSL.</p>
<h1 id="view-adapters">View Adapters</h1>
<p>View Adapters are backends for Views -- one exists to translate to HTML, another to translate to JSON, and another that performs tree-diffing to efficiently update HTML.</p>
<h1 id="auth">Auth</h1>
<p>The generic phrase &quot;auth&quot; confusingly can refer to either &quot;authentication&quot; or &quot;authorization.&quot; These are conflated both by the term and in many people's heads, so we avoid it, and make a strong split between the two.</p>
<h2 id="authentication">Authentication</h2>
<p>Authentication is the answer to the question &quot;what user does this request correspond to?&quot; As with other parts of a web application, <code>enterprise</code> simplifies authentication by abstracting it heavily.</p>
<p>For our app, we want to allow a plethora of authentication methods, while also allowing a user to have multiple authentication methods. (This is useful since a user might forget whether they registered with their Google account or email, and it allows an anonymous user to add an email and stop being anonymous!)</p>
<p>In <code>app.sexp</code>:</p>
<pre style="background-color:#272822;">
<span style="color:#f8f8f2;">(authentication
  (multiple true)
  (providers
    anonymous</span><span style="color:#f92672;">-</span><span style="color:#f8f8f2;">cookie
    (email</span><span style="color:#f92672;">-</span><span style="color:#f8f8f2;">password :reset email)
    oauth</span><span style="color:#f92672;">-</span><span style="color:#f8f8f2;">facebook
    oauth</span><span style="color:#f92672;">-</span><span style="color:#f8f8f2;">google
    oauth</span><span style="color:#f92672;">-</span><span style="color:#f8f8f2;">twitter))
</span></pre>
<p>In <code>views/login.sexp</code>:</p>
<pre style="background-color:#272822;">
<span style="color:#f8f8f2;">TODO
</span></pre><h2 id="authorization">Authorization</h2>
<p>Authorization is the answer to the question &quot;can this user perform this action?&quot; This is almost entirely application-specific, so we leave the logic here to the app author.</p>
<p>But wait, we're using logic on a question with a boolean answer? Well, I know the best way to do this! <code>enterprise</code> apps specify authorization information with a Prolog dialect.</p>
<p>For our app, TODO.</p>
<p>In <code>src/authorization.pro</code>:</p>
<pre style="background-color:#272822;">
<span style="color:#a6e22e;">authorized</span><span style="color:#f8f8f2;">(UserID</span><span style="color:#f92672;">,</span><span style="color:#f8f8f2;"> Action)</span><span style="color:#f92672;">. </span><span style="color:#75715e;"># TODO
</span></pre>
</article>
<div class="comments">
		Comments are not enabled on this post.
	</div>

		<div class="spacer"></div>
		
<script src="https:&#x2F;&#x2F;remexre.xyz&#x2F;ext/anchor.min.js"></script>
<script>
	const anchors = new AnchorJS();
	anchors.options.class = "icon subtle";
	anchors.options.placement = "left";
	anchors.add("article h1:not(.title), article h2");
</script>

	</body>
</html>
