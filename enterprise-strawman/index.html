<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title>enterprise: Strawman Proposal &mdash; remexre.xyz</title>
		<link rel="stylesheet" type="text/css" href="https:&#x2F;&#x2F;remexre.xyz&#x2F;css/main.css">
		
	</head>
	<body>
		<header>
			<a class="subtle" href="https:&#x2F;&#x2F;remexre.xyz&#x2F;">Home</a>
			<a class="subtle" href="https:&#x2F;&#x2F;remexre.xyz&#x2F;tags">Tags</a>
			<a class="subtle" href="https:&#x2F;&#x2F;remexre.xyz&#x2F;contact">Contact</a>
			<a class="subtle" href="https://github.com/remexre">GitHub</a>
		</header>
		<div class="spacer"></div>
		
<article>
	<h1 class="title">
		<a class="subtle" href="https:&#x2F;&#x2F;remexre.xyz&#x2F;enterprise-strawman&#x2F;">enterprise: Strawman Proposal</a>
		<span class="spacer"></span>
		<span class="meta">
			Draft</span>
	</h1>
	<p>A friend (<a href="https://iptq.io/">Michael Zhang</a>) and I may be working on a web framework for Rust, <a href="https://crates.io/crates/enterprise"><code>enterprise</code></a>. This post serves as a strawman proposal for this framework, and as documentation for what the framework may eventually be.</p>
<p>Also note that despite the authorial &quot;we,&quot; this is almost entirely my vision (hence the S-expressions, use of Prolog, etc.), so expect this to be a strawman that's lit aflame rather than fortified.</p>
<h1 id="introduction">Introduction</h1>
<p>The model we use for webapps is described by a dependency diagram:</p>
<p class="graphviz"><!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: dependency graph Pages: 1 -->
<svg width="465pt" height="223pt"
 viewBox="0.00 0.00 464.76 223.48" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 219.4802)">
<title>dependency graph</title>
<polygon fill="#1e1f29" stroke="transparent" points="-4,4 -4,-219.4802 460.7566,-219.4802 460.7566,4 -4,4"/>
<!-- BLogic -->
<g id="node1" class="node">
<title>BLogic</title>
<g id="a_node1"><a xlink:href="#business-logic" xlink:title="Business\nLogic">
<ellipse fill="none" stroke="#8be9fe" cx="183.7947" cy="-188.6102" rx="45.9239" ry="26.7407"/>
<text text-anchor="middle" x="183.7947" y="-192.4102" font-family="Times,serif" font-size="14.00" fill="#8be9fe">Business</text>
<text text-anchor="middle" x="183.7947" y="-177.4102" font-family="Times,serif" font-size="14.00" fill="#8be9fe">Logic</text>
</a>
</g>
</g>
<!-- Actions -->
<g id="node2" class="node">
<title>Actions</title>
<g id="a_node2"><a xlink:href="#actions" xlink:title="Actions">
<ellipse fill="none" stroke="#8be9fe" cx="88.7947" cy="-98.8701" rx="38.1938" ry="18"/>
<text text-anchor="middle" x="88.7947" y="-95.1701" font-family="Times,serif" font-size="14.00" fill="#8be9fe">Actions</text>
</a>
</g>
</g>
<!-- BLogic&#45;&gt;Actions -->
<g id="edge5" class="edge">
<title>BLogic&#45;&gt;Actions</title>
<path fill="none" stroke="#fc4346" d="M159.3298,-165.4999C145.2284,-152.1792 127.5532,-135.4827 113.4242,-122.1359"/>
<polygon fill="#fc4346" stroke="#fc4346" points="115.6576,-119.431 105.9847,-115.1083 110.8507,-124.5196 115.6576,-119.431"/>
</g>
<!-- Schema -->
<g id="node3" class="node">
<title>Schema</title>
<g id="a_node3"><a xlink:href="#schema" xlink:title="Schema">
<ellipse fill="none" stroke="#8be9fe" cx="121.7947" cy="-18" rx="38.9931" ry="18"/>
<text text-anchor="middle" x="121.7947" y="-14.3" font-family="Times,serif" font-size="14.00" fill="#8be9fe">Schema</text>
</a>
</g>
</g>
<!-- BLogic&#45;&gt;Schema -->
<g id="edge7" class="edge">
<title>BLogic&#45;&gt;Schema</title>
<path fill="none" stroke="#fc4346" d="M174.2431,-162.3262C162.7797,-130.7817 143.6416,-78.1177 131.9264,-45.8801"/>
<polygon fill="#fc4346" stroke="#fc4346" points="135.1078,-44.387 128.4027,-36.1838 128.5287,-46.7778 135.1078,-44.387"/>
</g>
<!-- Authentication -->
<g id="node6" class="node">
<title>Authentication</title>
<g id="a_node6"><a xlink:href="#authentication" xlink:title="Authentication">
<ellipse fill="none" stroke="#f0fb8c" cx="245.7947" cy="-98.8701" rx="63.0888" ry="18"/>
<text text-anchor="middle" x="245.7947" y="-95.1701" font-family="Times,serif" font-size="14.00" fill="#f0fb8c">Authentication</text>
</a>
</g>
</g>
<!-- BLogic&#45;&gt;Authentication -->
<g id="edge6" class="edge">
<title>BLogic&#45;&gt;Authentication</title>
<path fill="none" stroke="#fc4346" d="M201.0652,-163.6125C209.3689,-151.5935 219.3197,-137.1906 227.7252,-125.0242"/>
<polygon fill="#fc4346" stroke="#fc4346" points="230.7223,-126.8435 233.527,-116.6266 224.9632,-122.8646 230.7223,-126.8435"/>
</g>
<!-- Actions&#45;&gt;Schema -->
<g id="edge1" class="edge">
<title>Actions&#45;&gt;Schema</title>
<path fill="none" stroke="#fc4346" d="M96.1185,-80.9224C100.3909,-70.4524 105.8668,-57.0331 110.6634,-45.2785"/>
<polygon fill="#fc4346" stroke="#fc4346" points="113.9538,-46.4787 114.4914,-35.8975 107.4726,-43.8339 113.9538,-46.4787"/>
</g>
<!-- Views -->
<g id="node4" class="node">
<title>Views</title>
<g id="a_node4"><a xlink:href="#views" xlink:title="Views">
<ellipse fill="none" stroke="#fc4cb4" cx="336.7947" cy="-188.6102" rx="33.2948" ry="18"/>
<text text-anchor="middle" x="336.7947" y="-184.9102" font-family="Times,serif" font-size="14.00" fill="#fc4cb4">Views</text>
</a>
</g>
</g>
<!-- Views&#45;&gt;Schema -->
<g id="edge9" class="edge">
<title>Views&#45;&gt;Schema</title>
<path fill="none" stroke="#fc4346" d="M339.3721,-170.2961C341.8463,-144.9298 342.19,-99.1647 317.7947,-72 298.0622,-50.0274 220.3754,-33.7066 168.9341,-25.0377"/>
<polygon fill="#fc4346" stroke="#fc4346" points="169.4563,-21.5766 159.0207,-23.4065 168.3197,-28.4838 169.4563,-21.5766"/>
</g>
<!-- ViewAdapters -->
<g id="node5" class="node">
<title>ViewAdapters</title>
<g id="a_node5"><a xlink:href="#view-adapters" xlink:title="View\nAdapters">
<ellipse fill="none" stroke="#f0fb8c" cx="410.7947" cy="-98.8701" rx="45.9239" ry="26.7407"/>
<text text-anchor="middle" x="410.7947" y="-102.6701" font-family="Times,serif" font-size="14.00" fill="#f0fb8c">View</text>
<text text-anchor="middle" x="410.7947" y="-87.6701" font-family="Times,serif" font-size="14.00" fill="#f0fb8c">Adapters</text>
</a>
</g>
</g>
<!-- Views&#45;&gt;ViewAdapters -->
<g id="edge10" class="edge">
<title>Views&#45;&gt;ViewAdapters</title>
<path fill="none" stroke="#fc4346" d="M350.3674,-172.1505C359.7849,-160.7299 372.6421,-145.1378 384.0764,-131.2715"/>
<polygon fill="#fc4346" stroke="#fc4346" points="386.9458,-133.2931 390.6075,-123.3512 381.5451,-128.8397 386.9458,-133.2931"/>
</g>
<!-- Views&#45;&gt;Authentication -->
<g id="edge8" class="edge">
<title>Views&#45;&gt;Authentication</title>
<path fill="none" stroke="#fc4346" d="M320.5257,-172.5664C306.7306,-158.9623 286.7186,-139.2273 270.8746,-123.6028"/>
<polygon fill="#fc4346" stroke="#fc4346" points="273.0548,-120.8371 263.477,-116.3076 268.1396,-125.8213 273.0548,-120.8371"/>
</g>
<!-- Authorization -->
<g id="node7" class="node">
<title>Authorization</title>
<g id="a_node7"><a xlink:href="#authorization" xlink:title="Authorization">
<ellipse fill="none" stroke="#fc4cb4" cx="59.7947" cy="-188.6102" rx="59.5901" ry="18"/>
<text text-anchor="middle" x="59.7947" y="-184.9102" font-family="Times,serif" font-size="14.00" fill="#fc4cb4">Authorization</text>
</a>
</g>
</g>
<!-- Authorization&#45;&gt;Actions -->
<g id="edge2" class="edge">
<title>Authorization&#45;&gt;Actions</title>
<path fill="none" stroke="#fc4346" d="M65.6633,-170.4499C69.7386,-157.8389 75.2441,-140.8021 79.8616,-126.5133"/>
<polygon fill="#fc4346" stroke="#fc4346" points="83.2892,-127.2888 83.0338,-116.697 76.6283,-125.1363 83.2892,-127.2888"/>
</g>
<!-- Authorization&#45;&gt;Schema -->
<g id="edge4" class="edge">
<title>Authorization&#45;&gt;Schema</title>
<path fill="none" stroke="#fc4346" d="M50.476,-170.4823C39.5595,-146.5235 24.9704,-103.6548 41.7947,-72 50.604,-55.4253 67.0209,-43.0167 82.7011,-34.3017"/>
<polygon fill="#fc4346" stroke="#fc4346" points="84.5173,-37.3026 91.7852,-29.5937 81.2962,-31.0877 84.5173,-37.3026"/>
</g>
<!-- Authorization&#45;&gt;Authentication -->
<g id="edge3" class="edge">
<title>Authorization&#45;&gt;Authentication</title>
<path fill="none" stroke="#fc4346" d="M91.7692,-173.1833C122.91,-158.1587 170.3949,-135.2485 204.4046,-118.8397"/>
<polygon fill="#fc4346" stroke="#fc4346" points="206.1293,-121.8937 213.6149,-114.3959 203.0875,-115.5891 206.1293,-121.8937"/>
</g>
</g>
</svg>
</p>
<p>As well as a dataflow diagram for server-side rendering:</p>
<p class="graphviz"><!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: dataflow graph Pages: 1 -->
<svg width="320pt" height="513pt"
 viewBox="0.00 0.00 319.76 513.48" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 509.4802)">
<title>dataflow graph</title>
<polygon fill="#1e1f29" stroke="transparent" points="-4,4 -4,-509.4802 315.7566,-509.4802 315.7566,4 -4,4"/>
<!-- HTTP -->
<g id="node1" class="node">
<title>HTTP</title>
<text text-anchor="middle" x="185.7947" y="-483.7802" font-family="Times,serif" font-size="14.00" fill="#cfcfcf">HTTP</text>
</g>
<!-- Router -->
<g id="node7" class="node">
<title>Router</title>
<g id="a_node7"><a xlink:href="#router" xlink:title="Router">
<ellipse fill="none" stroke="#f0fb8c" cx="185.7947" cy="-415.4802" rx="34.394" ry="18"/>
<text text-anchor="middle" x="185.7947" y="-411.7802" font-family="Times,serif" font-size="14.00" fill="#f0fb8c">Router</text>
</a>
</g>
</g>
<!-- HTTP&#45;&gt;Router -->
<g id="edge1" class="edge">
<title>HTTP&#45;&gt;Router</title>
<path fill="none" stroke="#cfcfcf" d="M179.8423,-469.3116C179.0803,-461.4927 178.8643,-452.1725 179.1942,-443.5023"/>
<polygon fill="#cfcfcf" stroke="#cfcfcf" points="182.6951,-443.6041 179.8674,-433.3936 175.7106,-443.1389 182.6951,-443.6041"/>
</g>
<!-- Databases -->
<g id="node2" class="node">
<title>Databases</title>
<text text-anchor="middle" x="175.7947" y="-22.8" font-family="Times,serif" font-size="14.00" fill="#cfcfcf">Databases and</text>
<text text-anchor="middle" x="175.7947" y="-7.8" font-family="Times,serif" font-size="14.00" fill="#cfcfcf">External Services</text>
</g>
<!-- DAL -->
<g id="node6" class="node">
<title>DAL</title>
<g id="a_node6"><a xlink:href="#data-access-layer" xlink:title="DAL">
<ellipse fill="none" stroke="#f0fb8c" cx="175.7947" cy="-92" rx="28.6953" ry="18"/>
<text text-anchor="middle" x="175.7947" y="-88.3" font-family="Times,serif" font-size="14.00" fill="#f0fb8c">DAL</text>
</a>
</g>
</g>
<!-- Databases&#45;&gt;DAL -->
<g id="edge3" class="edge">
<title>Databases&#45;&gt;DAL</title>
<path fill="none" stroke="#cfcfcf" d="M181.8055,-38.0429C182.5363,-46.0185 182.7252,-55.4487 182.3723,-64.1763"/>
<polygon fill="#cfcfcf" stroke="#cfcfcf" points="178.8685,-64.1118 181.6729,-74.3287 185.8519,-64.5929 178.8685,-64.1118"/>
</g>
<!-- Authorization -->
<g id="node3" class="node">
<title>Authorization</title>
<g id="a_node3"><a xlink:href="#authorization" xlink:title="Authorization">
<ellipse fill="none" stroke="#fc4cb4" cx="59.7947" cy="-164" rx="59.5901" ry="18"/>
<text text-anchor="middle" x="59.7947" y="-160.3" font-family="Times,serif" font-size="14.00" fill="#fc4cb4">Authorization</text>
</a>
</g>
</g>
<!-- Actions -->
<g id="node4" class="node">
<title>Actions</title>
<g id="a_node4"><a xlink:href="#actions" xlink:title="Actions">
<ellipse fill="none" stroke="#8be9fe" cx="175.7947" cy="-164" rx="38.1938" ry="18"/>
<text text-anchor="middle" x="175.7947" y="-160.3" font-family="Times,serif" font-size="14.00" fill="#8be9fe">Actions</text>
</a>
</g>
</g>
<!-- Authorization&#45;&gt;Actions -->
<g id="edge11" class="edge">
<title>Authorization&#45;&gt;Actions</title>
<path fill="none" stroke="#50fb7c" d="M119.6072,-164C122.0764,-164 124.5455,-164 127.0147,-164"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="127.1658,-167.5001 137.1658,-164 127.1658,-160.5001 127.1658,-167.5001"/>
</g>
<!-- BLogic -->
<g id="node5" class="node">
<title>BLogic</title>
<g id="a_node5"><a xlink:href="#business-logic" xlink:title="Business\nLogic">
<ellipse fill="none" stroke="#8be9fe" cx="175.7947" cy="-244.8701" rx="45.9239" ry="26.7407"/>
<text text-anchor="middle" x="175.7947" y="-248.6701" font-family="Times,serif" font-size="14.00" fill="#8be9fe">Business</text>
<text text-anchor="middle" x="175.7947" y="-233.6701" font-family="Times,serif" font-size="14.00" fill="#8be9fe">Logic</text>
</a>
</g>
</g>
<!-- Actions&#45;&gt;BLogic -->
<g id="edge9" class="edge">
<title>Actions&#45;&gt;BLogic</title>
<path fill="none" stroke="#50fb7c" d="M181.5352,-182.1488C182.3023,-189.7278 182.6322,-198.826 182.525,-207.7117"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="179.0193,-207.8348 182.1982,-217.9415 186.0158,-208.0584 179.0193,-207.8348"/>
</g>
<!-- Actions&#45;&gt;DAL -->
<g id="edge13" class="edge">
<title>Actions&#45;&gt;DAL</title>
<path fill="none" stroke="#50fb7c" d="M169.879,-146.2022C169.0892,-138.3271 168.8602,-128.875 169.1918,-120.0852"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="172.7016,-120.0532 169.8745,-109.8425 165.7171,-119.5876 172.7016,-120.0532"/>
</g>
<!-- BLogic&#45;&gt;Actions -->
<g id="edge8" class="edge">
<title>BLogic&#45;&gt;Actions</title>
<path fill="none" stroke="#50fb7c" d="M169.3912,-217.9415C168.9515,-209.6709 168.9303,-200.5487 169.3274,-192.1957"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="172.8235,-192.3753 170.0542,-182.1488 165.8417,-191.8702 172.8235,-192.3753"/>
</g>
<!-- Views -->
<g id="node9" class="node">
<title>Views</title>
<g id="a_node9"><a xlink:href="#views" xlink:title="Views">
<ellipse fill="none" stroke="#fc4cb4" cx="272.7947" cy="-244.8701" rx="33.2948" ry="18"/>
<text text-anchor="middle" x="272.7947" y="-241.1701" font-family="Times,serif" font-size="14.00" fill="#fc4cb4">Views</text>
</a>
</g>
</g>
<!-- BLogic&#45;&gt;Views -->
<g id="edge15" class="edge">
<title>BLogic&#45;&gt;Views</title>
<path fill="none" stroke="#50fb7c" d="M222.0213,-244.8701C224.4756,-244.8701 226.93,-244.8701 229.3844,-244.8701"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="229.4747,-248.3702 239.4746,-244.8701 229.4746,-241.3702 229.4747,-248.3702"/>
</g>
<!-- DAL&#45;&gt;Databases -->
<g id="edge4" class="edge">
<title>DAL&#45;&gt;Databases</title>
<path fill="none" stroke="#cfcfcf" d="M169.9165,-74.3287C169.1141,-66.4433 168.8656,-56.9433 169.171,-48.0578"/>
<polygon fill="#cfcfcf" stroke="#cfcfcf" points="172.6664,-48.238 169.7839,-38.0429 165.6795,-47.8103 172.6664,-48.238"/>
</g>
<!-- DAL&#45;&gt;Authorization -->
<g id="edge12" class="edge">
<title>DAL&#45;&gt;Authorization</title>
<path fill="none" stroke="#50fb7c" d="M155.3503,-104.6896C138.6393,-115.0619 114.6313,-129.9635 94.8609,-142.2347"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="92.7675,-139.4147 86.1169,-147.6621 96.4591,-145.3622 92.7675,-139.4147"/>
</g>
<!-- DAL&#45;&gt;Actions -->
<g id="edge14" class="edge">
<title>DAL&#45;&gt;Actions</title>
<path fill="none" stroke="#50fb7c" d="M181.7149,-109.8425C182.5025,-117.7236 182.7295,-127.1774 182.3957,-135.9647"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="178.8862,-135.9908 181.7104,-146.2022 185.8705,-136.4583 178.8862,-135.9908"/>
</g>
<!-- Router&#45;&gt;HTTP -->
<g id="edge2" class="edge">
<title>Router&#45;&gt;HTTP</title>
<path fill="none" stroke="#cfcfcf" d="M191.722,-433.3936C192.4958,-441.1795 192.7238,-450.4902 192.4058,-459.1743"/>
<polygon fill="#cfcfcf" stroke="#cfcfcf" points="188.9029,-459.1057 191.7471,-469.3116 195.8882,-459.5596 188.9029,-459.1057"/>
</g>
<!-- Router&#45;&gt;BLogic -->
<g id="edge5" class="edge">
<title>Router&#45;&gt;BLogic</title>
<path fill="none" stroke="#50fb7c" d="M184.7245,-397.222C183.1195,-369.8382 180.0549,-317.5535 177.9683,-281.9537"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="181.4605,-281.7171 177.3813,-271.9391 174.4725,-282.1268 181.4605,-281.7171"/>
</g>
<!-- Authentication -->
<g id="node10" class="node">
<title>Authentication</title>
<g id="a_node10"><a xlink:href="#authentication" xlink:title="Authentication">
<ellipse fill="none" stroke="#f0fb8c" cx="94.7947" cy="-334.6102" rx="63.0888" ry="18"/>
<text text-anchor="middle" x="94.7947" y="-330.9102" font-family="Times,serif" font-size="14.00" fill="#f0fb8c">Authentication</text>
</a>
</g>
</g>
<!-- Router&#45;&gt;Authentication -->
<g id="edge6" class="edge">
<title>Router&#45;&gt;Authentication</title>
<path fill="none" stroke="#50fb7c" d="M168.249,-399.8877C155.0546,-388.1621 136.7398,-371.8861 121.6993,-358.5198"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="123.9769,-355.8615 114.177,-351.8349 119.3269,-361.0939 123.9769,-355.8615"/>
</g>
<!-- ViewAdapters -->
<g id="node8" class="node">
<title>ViewAdapters</title>
<g id="a_node8"><a xlink:href="#view-adapters" xlink:title="View\nAdapters">
<ellipse fill="none" stroke="#f0fb8c" cx="265.7947" cy="-334.6102" rx="45.9239" ry="26.7407"/>
<text text-anchor="middle" x="265.7947" y="-338.4102" font-family="Times,serif" font-size="14.00" fill="#f0fb8c">View</text>
<text text-anchor="middle" x="265.7947" y="-323.4102" font-family="Times,serif" font-size="14.00" fill="#f0fb8c">Adapters</text>
</a>
</g>
</g>
<!-- ViewAdapters&#45;&gt;Router -->
<g id="edge17" class="edge">
<title>ViewAdapters&#45;&gt;Router</title>
<path fill="none" stroke="#50fb7c" d="M242.6554,-358.0011C232.1698,-368.6008 219.7921,-381.1131 209.2669,-391.7528"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="206.5284,-389.5443 201.9839,-399.115 211.5049,-394.4672 206.5284,-389.5443"/>
</g>
<!-- Views&#45;&gt;ViewAdapters -->
<g id="edge16" class="edge">
<title>Views&#45;&gt;ViewAdapters</title>
<path fill="none" stroke="#50fb7c" d="M271.3829,-262.9696C270.6089,-272.8918 269.6202,-285.5672 268.6902,-297.4897"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="265.1833,-297.4432 267.8949,-307.6852 272.1621,-297.9877 265.1833,-297.4432"/>
</g>
<!-- Authentication&#45;&gt;Authorization -->
<g id="edge10" class="edge">
<title>Authentication&#45;&gt;Authorization</title>
<path fill="none" stroke="#50fb7c" d="M91.0491,-316.3519C84.9441,-286.5928 72.8061,-227.4252 65.5846,-192.2233"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="68.9517,-191.2196 63.5134,-182.127 62.0945,-192.6264 68.9517,-191.2196"/>
</g>
<!-- Authentication&#45;&gt;BLogic -->
<g id="edge7" class="edge">
<title>Authentication&#45;&gt;BLogic</title>
<path fill="none" stroke="#50fb7c" d="M110.7977,-316.8804C121.2038,-305.3515 135.066,-289.9934 147.3151,-276.4226"/>
<polygon fill="#50fb7c" stroke="#50fb7c" points="150.2003,-278.4498 154.3025,-268.6813 145.004,-273.7595 150.2003,-278.4498"/>
</g>
</g>
</svg>
</p>
<p>In the above diagrams, <span style="color: #f0fb8c">yellow</span> components are provided by <code>enterprise</code>, <span style="color: #8be9fe">blue</span> components are written by the application author in Rust, and <span style="color: #fc4cb4">pink</span> components are written by the application author in a DSL.</p>
<p>The Schema and DAL components are taken from <a href="https://www.tedinski.com/2018/09/11/stateless-mvc.html">Ted Kaminski's &quot;Stateless MVC,&quot;</a> which describes them in detail.</p>
<h1 id="schema">Schema</h1>
<p>The Schema component contains type declarations for each of the &quot;domain objects.&quot; If a type ends up being sent over the network, it should probably be declared here. <a href="https://iptq.io/magic-forms-with-proc-macros/">Derive macros</a> are provided to allow the Router to validate these values.</p>
<p>The only exports of the Schema should be types -- if you find yourself exporting functions, they probably belong in the business logic.</p>
<h1 id="actions">Actions</h1>
<p>Actions are the atomic primitive functions that are used to define the business logic. Macros are available to define CRUD actions for types in the Schema (relative to some data store supported by the DAL).</p>
<h1 id="business-logic">Business Logic</h1>
<p>The Business Logic module transforms requests into data that can be handled directly by a View.</p>
<h1 id="views">Views</h1>
<p>Views are written in a React-like DSL.</p>
<h1 id="view-adapters">View Adapters</h1>
<p>View Adapters are backends for Views -- one exists to translate to HTML, another to translate to JSON, and another that performs tree-diffing to efficiently update HTML.</p>
<h1 id="auth">Auth</h1>
<p>The generic phrase &quot;auth&quot; confusingly can refer to either &quot;authentication&quot; or &quot;authorization.&quot; These are conflated both by the term and in many people's heads, so we avoid it, and make a strong split between the two.</p>
<h2 id="authentication">Authentication</h2>
<p>Authentication is the answer to the question &quot;what user does this request correspond to?&quot; As with other parts of a web application, <code>enterprise</code> simplifies authentication by abstracting it heavily.</p>
<p>For our app, we want to allow a plethora of authentication methods, while also allowing a user to have multiple authentication methods. (This is useful since a user might forget whether they registered with their Google account or email, and it allows an anonymous user to add an email and stop being anonymous!)</p>
<p>In <code>app.sexp</code>:</p>
<pre style="background-color:#272822;">
<span style="color:#f8f8f2;">(authentication
  (multiple true)
  (providers
    anonymous</span><span style="color:#f92672;">-</span><span style="color:#f8f8f2;">cookie
    (email</span><span style="color:#f92672;">-</span><span style="color:#f8f8f2;">password :reset email)
    oauth</span><span style="color:#f92672;">-</span><span style="color:#f8f8f2;">facebook
    oauth</span><span style="color:#f92672;">-</span><span style="color:#f8f8f2;">google
    oauth</span><span style="color:#f92672;">-</span><span style="color:#f8f8f2;">twitter))
</span></pre>
<p>In <code>views/login.sexp</code>:</p>
<pre style="background-color:#272822;">
<span style="color:#f8f8f2;">TODO
</span></pre><h2 id="authorization">Authorization</h2>
<p>Authorization is the answer to the question &quot;can this user perform this action?&quot; This is almost entirely application-specific, so we leave the logic here to the app author.</p>
<p>But wait, we're using logic on a question with a boolean answer? Well, I know the best way to do this! <code>enterprise</code> apps specify authorization information with a Prolog dialect.</p>
<p>For our app, TODO.</p>
<p>In <code>src/authorization.pro</code>:</p>
<pre style="background-color:#272822;">
<span style="color:#a6e22e;">authorized</span><span style="color:#f8f8f2;">(UserID</span><span style="color:#f92672;">,</span><span style="color:#f8f8f2;"> Action)</span><span style="color:#f92672;">. </span><span style="color:#75715e;"># TODO
</span></pre>
</article>
<div class="comments">
		Comments are not enabled on this post.
	</div>

		<div class="spacer"></div>
		
<script src="https:&#x2F;&#x2F;remexre.xyz&#x2F;ext/anchor.min.js"></script>
<script>
	const anchors = new AnchorJS();
	anchors.options.class = "icon subtle";
	anchors.options.placement = "left";
	anchors.add("article h1:not(.title)");
</script>

	</body>
</html>
